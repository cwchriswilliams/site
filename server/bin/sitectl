#!/usr/bin/env bb

(ns sitectl
  (:require
   [babashka.process :refer [shell]]
   [clojure.string :as str]))

(when (str/blank? (System/getenv "SITE_HOME"))
  (println "SITE_HOME not set")
  (System/exit 1))

(def CONFIG_FILE (str (System/getenv "SITE_HOME") "/sitectl/sitectl.edn"))

(if *command-line-args*
  (apply shell "bb" "--config" CONFIG_FILE *command-line-args*)
  (shell "bb" "--config" CONFIG_FILE "tasks"))

;; Local Variables:
;; mode: clojure
;; End:
